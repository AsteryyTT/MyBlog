---
title: MySQL
date: 2023-02-25 11:18:57
tags: 数据库
categories: 数据库
cover: /img/images/MySQL.jpg 
---

### 一、数据库概念

DataBase：以表的数据结构形式来对程序产生的数据进行结构化存储和管理的数据仓库

DBMS：DataBase Manager Service

数据库管理系统

1. 数据库服务器

   负责永久性存储管理以及维护数据

   在一个MySQL数据库服务器中可以存在多个数据库，互相之间名称不能重复

2. 数据库客户端

   通过ip和端口号链接上数据库服务器，通过账号密码进行登录，登录成功后就可以向数据库服务器发送sql指令来操作数据库服务器端的数据，并呈现操作结果

   客户端：

   1. cmd命令行
   2. 图形界面（navicat...）
   3. Java代码(JDBC,mybatis...)

### 二、数据库分类

1、**关系型数据库**

使用一张二维表来存储数据，表中列与列之间有关系，同一个库中表和表之间也可以存在关系

1. Oracle

   甲骨文公司产品，第一款大型关系型数据库

   个人免费，公司收费

2. DB2

   IBM公司大型关系型数据库

   跨平台性好

3. SqlServer

   微软公司大型关系型数据库

   对windows平台支持比较好

4. MySQL

   小型关系型数据库

   免费开源(非核心代码)

5. sqlite

   小型关系型数据库，主要应用于移动设备上，可以用于存储联系人，短信，图片等信息

2、**非关系型数据库**

主要是以key-value键值对的形式来对数据进行存储，元素和元素之间没有关系，主要用于充当缓存

1. redis
2. memcached
3. mongodb

### 三、数据库基本命令

1. status

   显示当前数据库系统的相关信息

2. show databases;

   查看当前数据库系统中有那些库

3. use 库名

   打开/切换到某一个库中

4. show tables;

   查看当前库下有那些表

5. select database()

   查看当前正在操作的库

6. select user()

   查看当前登录用户

7. select now()

   查询当前系统的日期时间

8. select XXX(now())

   查询当前日期时间的指定字段

   XXX:date/time/year/month/day/hour/minute/week/second

### 四、SQL语句

Structured Query Language(结构化查询语言)

通过数据库客户端向服务器发送指令来执行建库删库，建表删表以及对表中数据执行增删查改等操作

sql语句是一门国际化标准语言，各大数据库厂商都会遵循相同的sql标准

特点：关键字不区分大小写，表中数据区分大小写

SQL语句分类;

1. DDL(数据定义语言)

   主要用于对数据库和表的创建删除，以及对表结构的修改

   1. alter  	更新(数据库，表，表结构)
   2. create     创建(数据库，表)
   3. drop       删除(数据库，表，表中列)
   4. trunate    表截断(表)

2. DML(数据操作语言)

   主要用于对表中数据执行插入，删除，修改操作

   1. insert   插入
   2. delete   删除(删除表中一行数据)
   3. update   修改

3. DQL(数据查询语言)

   主要用于从表中查询数据

   1. select	查询

4. TCL(事务控制语言)

   主要用于控制多个人操作数据库

   1. set transaction   设置事务
   2. commit            提交事务
   3. rollback          回滚事务
   4. savepoint         设置回滚点

5. DCL(数据控制语言)

   主要用于设置用户的访问权限

   1. create user	创建用户
   2. grant          授权
   3. revoke         撤销权限

### 五、DDL数据定义语言

1. DataBase数据库的创建与删除

   先显示当前数据库系统有那些库(库名不能重复)

   > show databases；

   创建一个数据库，并设置编码方式

   > create database 库名 default character set utf8；
   >
   > create database 库名 charset=utf8；
   >
   > 注意：可以在库名前面添加if not exists判断库是否存在。存在就不创建

   删除一个数据库

   > drop database 库名；

   打开/切换到某一个库

   > use 库名；

   查看当前正在工作的数据库

   > select database();

   查看数据库的创建过程

   > show create database 库名；

2. Table表格的创建与删除

   表格是关系型数据库中存储数据的最基本单元，表格由行row和列colum组成，其中表头也叫做字段Filed，表中的每一行叫做记录Record

   打开数据库

   > use 库名

   显示当前库下表名不能重复

   > show tables;

   创建一个表

   > mysql>create table 表名(
   >
   > ​    ->字段名 字段类型(类型大小)
   >
   > );

   > 约束Constraint
   >
   > 注意：
   >
   > ​	primary key		主键
   >
   > ​	auto_increment	 自增
   >
   > ​	comment			注释
   >
   > ​	not null		   不能为空
   >
   > ​	default 		   默认值
   >
   > ​	unique			 唯一的
   >
   > ​	foreign key        外键

   删除表

   > drop table 表名；

   查看表结构

   > desc 表名；

   查看表的创建过程

   >  show create table 表名；

   列添加

   > alter table 表名 add 列名 类型；

   在某一列后添加一列

   > alter table 表名 add 列名 类型 after 插入在谁后面的列名；

   在最前面插入列

   > alter table 表名 add 列名 类型 first;

   列名的修改

   > alter table 表名 change 旧列名 新列名 类型；

   列属性修改

   > alter table 表名 modify 列名 类型；
   >
   > 注意：长度由大改小可能会失败

   删除列

   > alter table 表名 drop 列名；

   表名修改

   > alter table 表名 rename to 新表名；

   表截断(不能回滚)

   > truncate table 表名

3. 表中字段的常用数据类型

   1. 数值类型

      1. 整数类型

         1. tinyint	 1个字节
         2. smallint    2个字节
         3. mediumint   3个字节
         4. int/integer 4个字节
         5. bigint      8个字节

      2. 浮点类型

         1. float       4个字节
      
         2. double      8个字节

         3. decimal(m,d)精确位数，公共m位，精确到小数点后d位
      
   2. 字符类型
      数据库中不区分字符和字符串，字符类型必须使用单引号或者双引号引起来
      
      1. char(定长字符类型)不足的会以空格补齐，最多255个字符
      2. varchar(可变长度字符类型)由多少字符就占多少位置，最多65535字符
      
      char和varchar的区别：
      
      > 1. char是定长字符串，查询速度快，但是可能浪费空间，一般列下面的数值长度为定长时使用
      >
      > 2. varchar是变长字符串，可以节约空间，但是查询速度慢，一般列下面数值长度不固定时使用
     
   3. 日期时间类型
      
      在MySQL数据库中日期时间类型都是以特定字符串格式来进行存储的
      
      1. date
      
         日期类型，以“yyyy-MM-dd”字符串格式来进行存储
      
      2. time
      
         时间类型，以“HH:mm:ss”字符串格式来进行存储
      
      3. datetime
      
         日期时间类型，以“yyyy-MM-dd HH:mm:sss"字符串格式来存储
      
      4. year
      
         年份类型，以”yyyy“字符串格式来进行存储
      
      5. timestamp
      
         时间戳类型，以int整数值格式来进行存储
      
   3. 布尔类型
      
         boolean/bool
      
         只能存储true/false两种值，在MySQL底层会自动将boolean类型转成tinyint类型，其他true转为1，false转为0
      
   4. 不常用类型
      
         > 注意：text文本类型和blob二进制类型不建议使用，实际业务中是将数据存储到文件中，然后再将文件的地址存储到数据库中
      
         1. 文本类型
         
            主要用于存储大数据量的文本
         
            1. tinytext
            2. mediumtext
            3. text
            4. longtext
         
         2. blob(二进制类型)
         
            主要用于存储二进制文件
         
            图片、视频、音频...
         
            1. tinyblob
            2. mediumblob
            3. blob
            4. longblob

### 六、DML数据操纵语言

主要用于对表中数据执行增删改操作

1. insert(插入)

   > 1. 向所有列下面插入数据(有几列就给几个值)
   >
   >    insert into 表名 values(值1，值2，值3...)；
   >
   > 2. 向部分列下面插入数据(列个数与值个数相等)
   >
   >    insert into 表名(列1，列2，列3...) values(值1，值2，值3...)
   >
   >    非空列，如果没有默认值，要主动插入数据
   >
   > 3. 同时插入多条数据
   >
   >    insert into 表名(列1，列2，列3...) 
   >
   >    values(值1，值2，值3...)，(值1，值2，值3...)，(值1，值2，值3...)...

2. update(修改)

   > 1. 修改列下面所有的记录(危险操作)
   >
   >    update 表名 set 列名1=值1，列名2=值2...；
   >
   > 2. 根据条件修改列下面的值
   >
   >    update 表名 set 列名 = 值 where 条件；
   >
   > 3. 根据多条件修改下面的值
   >
   >    update 表名 set 列名=值... where 条件1，条件2；
   >
   > 4. 条件值为null时
   >
   >    update 表名 set 列名=值... where 条件名 is null；
   >
   > 5. 条件的值不为null时
   >
   >    update 表名 set 列名=值... where 条件 is not null；

1. delete(删除)

   > 1. 全表删除(禁用)
   >
   >    delete from 表名；
   >
   > 2. 根据条件删除一条记录
   >
   >    delte from 表名 where 条件；

### 七、DQL数据查询语言

主要用于从表中查询数据回来

导入sql文件

> msyql> source XXX.sql

导出sql文件

> mysqldump -u用户名-p密码 数据库名 > 导出地址\数据库名.sql

1. 基本查询

   1. 全表查询

      > select * from 表名；

   2. 查询指定数据

      > select 列名1 列名2 ...from 表名；

   3. 对查询出来的列指定列别名

      > select 列名1 as 别名1，列名2 as 别名2 form 表名；

   4. 去除列下面重复的数据

      > select distinct 列名 from 表名；
      >
      > select distinct 列名1，列名2 from 表名；

2. 限制查询

   限制查询执行过程：

   执行from 表名-> 执行where 查询限制条件(从上到下做逐行匹配)->返回true，留下该行记录，返回false过滤改行记录->执行select 列名1，列名2...从留下的行记录中确定显示的列

   查询比较条件：

   ​	=	>	<	>=	<=	!=	<>	is null	is not null

   1. 根据条件查询指定列名

      > select 列名，列名2... from 表名 where 条件；

   2. 查询某年的数据大小比较

      > select 列名1,列名2... from 表名 where 列名 < 'yyyy-MM-dd';
      >
      > select 列名1,列名2... from 表名 where year(列名) < yyyy;

   3. 查询不是某个部门的

      > select * from 表名 where 列名 <> ‘值’；

   4. and 和 or(and优先级比or高，小括号提升优先级)

      > and:等于&&，查询出来的结果必须同时满足多个条件
      >
      > or：等于||，查询出来的结果满足其中一个即可

   5. any 和all

      > any：查询的结果值只要满足其中任意一个条件即可
      >
      > all：查询的结果值需要同时满足多个条件
      >
      > 一般配合 > >= < <= 来进行使用
      >
      > select * from 表名 where 查询列 > any(值1，值2...);大于最小值
      >
      > select * from 表名 where 查询列 < any(值1，值2...);小于最大值
      >
      > select * from 表名 where 查询列 > all(值1，值2...);大于最大值
      >
      > select * from 表名 where 查询列 < all(值1，值2...);小于最小值

   5. 值范围查询

      > select * from 表名 where 查询列 between 值1 and 值2；
      >
      > select * from 表名 where 查询列>= 值1 and 查询列<= 值2；
      >
      > 不在值1和值2范围内
      >
      > select * from 表名 where 查询列 not between 值1 and 值2；
      >
      > select * from 表名 where 查询列<值1 or 查询列>值2；

   6. 值列表查询

      判断查询列下面的数据是否在值列表的范围之内，等价于查询列=值1 or 查询了=值2

      > select * from 表名 where 查询列 in(值1，值2...)

      判断查询列下面的数据是否在值列表的范围之内等价于查询列!=值1 or 查询了!=值2

      > select * from 表名 where 查询列 not in(值1，值2...)

      > 注意：in和 not in 不能匹配null值，需要使用is null 和is not null
      
   8. 查询列上使用表达式或函数

      > 表达式：
      >
      > ​	select * from 表名 where 表达式(列名+-*/值) > 值；
      >
      > ​	select *,新增列 from 表名 where 表达式(列名+-\*/值) > 值;

   9. 查询是否包含某个字符

      > select * from 表名 where 列名 regexp '字符'；
      >
      > select * from 表名 where 列名 rlike '字符'；

   10. 查询某个列的值为null

      > select * from 表名 where 列名 <=> null;

3. 函数

   1. 系统函数
      1. BIN(X) 	 	将X转换为二进制
      2. BINARY(S)       将字符串s转为二进制字符串
      3. CAST(X AS type) 转换数据类型
      4. USER()          返回当前用户
      5. VERSION()       返回数据库的版本号
      6. IFNULL(v1,v2)   v1的值为null，返回v1，否则返回v2
      7. LAST_INSERT_ID()返回插入的最后一条记录的自增长id
      8. JSON_OBJECT()   将键值对转换为JSON对象
      9. JSON_ARRAY()    将值转换为JSON数组

   2. 字符串函数

      1. 以字段值:字段值2:字段值3格式显示所有信息

         > select concat(列名1，':',列名2，':',....)from 表名；
         >
         > select concat_ws(':'，列名1,列名2....)from 表名；

      2. 左侧补齐/右侧补齐

         > select lpad(列名，长度，'填补字符') from 表名；
         >
         > select rpad(列名，长度，'填补字符') from 表名；

   3. 日期函数

      1. 查询一个时间段到多少天后的时间

         > select adddate(起始日期，多少天)；
         >
         > select adddate(起始日期，INTERVAl 10 MONTH)；

      2. 计算两个日期直接的时间

         > select datediff(结束日期，起始日期)；

   4. 数值函数

      1. 查询数值四舍五入保留小数点后X位

         > select 列名，round(列名，X) from 表名；

      2. 查询数值四舍五入不保留小数

         > select 列名 truncate(列名，1)；

4. 模糊查询

   只知道查询数据的一部分信息，需要借助like关键字以及%和_两个通配符来完成查询

   %：代表0到多个任意字符，相当于正则表达式.*

   _：代表任意的一个字符，相当于正则表达式.

5. 排序查询

   对表中已经查询出来的数据按照从小到大或者从大到小的顺序来进行排序如果和其他限制查询防砸一起使用时，排序查询必须放在最后

   > select 列名1 列名2... from表名 [限制查询|模糊查询] order by 排序列 [asc(默认升序)]|desc(降序);

6. 分支查询

   根据列下面的不同的值来执行不同的操作

   > select 列名1 列名2 case 查询列
   >
   > ​	when 值1 then 操作1
   >
   > ​	when 值2 then 操作2
   >
   > ​	else 操作
   >
   > ​	end [列别名] 
   >
   > from 表名；
   >
   > null值在排序查询时被当做最小值
   
7. 分页查询

   当数据库中数据量比较大的时候，不能一次性把数据库中所有数据都查询回来，这样会增大服务器端的查询和浏览器的展示压力，所以需要使用分页每次查询一批数据回来，MySQL中分页查询需要使用limit关键字完成

   注意：分页查询不是标准的sql，不同的数据库需要使用不同的方式来完成分页

   查询前五条数据

   > select *from 表名 limit 5；

   分页公式：

   > select * from 表名 limit (page-1)*pageSize，pageSize；

   总记录数：

   > select count(*) from 表名；

8. 分组查询

   1. 单独使用分组函数

      注意：分组函数是根据列下面多个数据经过计算返回一个数据，所以在select后面除了分组查询列外，不能再跟其他列

      分组函数：聚合函数，多行函数

      对表中不能直接体现出来的数据，需要根据列下面的多个值经过计算返回一个值

      > max()/min()
      >
      > 求最大/最小值
      >
      > 可以对任意数据类型做统计

      求某个值的最大值

      > select 列名1，列名2... 列名X from 表名 where 列名X=(select max(列名X) from 表名)；

   2. 单独使用分页查询

      按照列下面不同的值来划分位若干个小组

      > select 分组列 from 表名 [限制条件] group by 分组列 [having 过滤条件]

      > select year(列名) from 表名 group by year(列名)

   3. 分组函数和分页查询联合在一起使用

      按照列下面不同的值来划分为若干个小组然后再单独使用分组函数来进行查询

      > select 分组列，分组列2...from 表名 [where 限制条件] group by 分组列 [having]

   4. sql实际执行顺序

      > 1. from 表名
      > 2. where 限制查询 | 模糊查询
      > 3. select 查询列
      > 4. group by 分组查询
      > 5. having 分组过滤
      > 6. order by 排序
      > 7. limit 分页

9. 子查询(嵌套查询)

   在select查询语句中，where后面的限制条件不是一个确定的值，而是来自于另外一个查询语句的结果那么这套查询语句就被称为子查询，子查询主要是给主查询(父查询)提供数据使用，所以子查询要比主查询先执行，并且子查询必须要带上小括号

   按照子查询返回结果分类：

   1. 单行单列子查询

      子查询的结果只有一列，且这一列下面只有一个值，一般可以配合 > >= < <= != <=>等比较运算符来进行使用

   2. 多行单列子查询

      子查询的结果只有一列，但是这一列下面可能有多个值一般配合any/all/in来进行使用

   3. 多行多列子查询

      子查询的返回结果有多个列，每列下面有多个值，一般是将其当做一张表来看待

   4. 基于子查询复制一张表

      > create table 新表名 as (select * from 旧表名)；

   5. 子查询的exists(包含)关键字使用

      子查询一般都是跟在where后面，exists后面的子查询只要至少返回一条记录，那么整个条件返回true，如果一条记录都没有，那么整个条件返回false

      exists关键字使用场景:

      当主查询给子查询提供数据使用时，可以使用exists或者not exists关键字

10. 多表查询

    我们需要查询的数据来自多张表，通常会在两张表之间建立一个关联字段，通过关联字段将两张表链接在一起，然后进行查询，这种关系一般时建立在主表的主键字段和从表的非主键字段之间

    1. 关联查询

       > select 列1，列2... from 表1，表2... where 表1.关联列=表2.关联列 and 表2.关联列=表3.关联列... [and 限制条件]
       >
       > 注意：查询列可以来自不同的表。关联查询只会返回两张表中同时满足条件的记录
       >
       > 做关联查询时，没有指定连接条件那么就会将左侧表中的每一行记录和右侧表中的所有记录从最后一行到第一行做逐行匹配显示，这是一个没有意义的值

    2. 链接查询
    
       1. 内连接
       
          > select 列1，列2... from 表1 inner join 表2 on 表1.关联列=表2.关联列... [where 限制条件]
          >
          > 注意：内联的查询结果和关联查询是一样的，都是返回两张表中同时满足条件的记录
       
       2. 外连接
          
          当从多张表查询数据时，需要返回满足条件的记录，也需要返回不满足的记录
       
          左外连接：以左侧当做驱动表，右侧表当做匹配表
          
          右外连接：以右侧表当做驱动表，左侧表当做匹配表，将驱动表中的每一行记录取出来和匹配表中的所有记录从下往上逐一进行匹配，最终会显示驱动表中的所有记录，匹配表中能匹配上的就显示，匹配不上的就显示null
          
          1. 左外连接
          
             > select 列1，列2... from 表1 left outer join 表2 on 表1.关联列=表2.关联列... [where 限制条件]
          
          2. 右外连接
          
             > select 列1，列2... from 表1 right outer join 表2 on 表1.关联列=表2.关联列... [where 限制条件]
          
          3. 查询结果集并集关键字
          
             1. union
          
                对两个结果集相同列的数据进行合并去除重复记录
          
             2. union all
          
                对两个结果集相同列的数据进行合并重复记录
          
       3. 自连接
       
          如果一张表数据之间具有上下级关系，此时我们可以通过表的别名将一张表虚拟成多张表，再通过关联查询或连接查询来查询表中数据
       
          > select 列1，列2... from 表1 别名1 left outer join 表1 别名2 on 别名1.关联列=别名2.关联列... [where 限制条件]
    
11. foreign key  

    为了保证两张表中数据的完整性和一致性，可以再两张表关联字段之间建立一个外键约束关系，将两张表绑定在一起

    > alter table 副表 add constraint 别名 foreign key (列名) references 主表(列名)；

    > 注意：外键的建立会影响数据库的操作性能，因为在执行DML操作时会频繁的查询另外一张表中所有记录，所以不建议在两张表之间建立外键的约束，数据的完整性和一致性由java代码来控制

    > alter table 副表 drop foreign key 外键的别名；

    在数据库中除了主键约束之外，其他的三种约束都不需要创建，非空，唯一，外键三个约束作用应该都是用java业务逻辑代码来控制

### 八、TCL事务控制语言

为了保证表中数据的安全性和一致性，通常会将若干个DML操作绑定在一起向数据库提交，这些操作要么同时成功，要么同时失败，事务是一组不可分割的逻辑单元

1. 事务的四大特性

   1. **原子性Atomicity**

      同一个事务内部的操作都是不可分割的

   2. **一致性Consistency**

      事务提交前后，数据库的状态必须是一致的，外界只能读取到事务开启前的状态或事务提交后端而状态，而不能读取到中间的状态

   3. **隔离性lsolation**

      多个用户在操作同一个表中的数据时，每个用户的操作时相互独立的事务，这些事务之间应该相互隔离，彼此不能干扰

   4. 持久性Durability

      事务一旦被提交后马，对数据库的修改就是永久性的，其他的回滚操作或故障不会对其具有任何影响

2. 手动事务

   事务的开启和提交需要去手动执行，每执行完一个DML操作后，如果不主动提交事务，那么数据不会持久化到数据库中

3. 自动事务

   事务的开启和提交是由数据库自动执行的，只要执行了一个DML操作后，不需要手动提交事务，数据会自动持久化到数据库中

   mysq默认使用的是自动事务，每个事务中只有一条sql语句，所以通常在对mysql执行事务操作时需要将自动事务改为手动事务，方便我们可以去控制一个事务中可以存在多条sql语句，以及事务的开启，提交以及回滚时机

4. 事务提交

   1. 将自动事务提交改为手动提交

      > set autocommit = 0;

   2. 将事务改为手动提交后，下一条sql语句会自动开启一个事务

      > 例：insert into 表名 values(值1，值2...)；
      >
      > 注意：在事务提交之前，数据是不会持久化到数据库中，而是存在内存的回滚段内

   3. 提交事务，数据会被持久化到数据中，事务结束

      > commit;

   4. 事务回滚

      让内存回滚段中操作撤销，事务回滚后，改事务结束

      > rollback;

   5. 设置回滚点

      > savepoint 别名；
      >
      > SQL语句；
      >
      > savepoint 别名2；
      >
      > SQL语句；
      >
      > .......
      >
      > 让事务回滚到指定的回滚点
      >
      > rollback to 别名；
      >
      > 注意：回滚到某个回滚点上时，改事务并没有结束，需要rollback或这commit结束事务

   6. 事务在java代码中控制：

      ```java
      try{
          开启事务
          DML....
          DML....
          提交事务
      }catch(Exception){
          回滚事务
      }
      ```

   7. 事务隔离级别

      |        事务隔离级别         | 脏读 | 不可重复读 | 幻读 |
      | :-------------------------: | :--: | :--------: | :--: |
      | 读未提交(read-uncommitted)  |  是  |     是     |  是  |
      | 读已提交（read-committed）  |  否  |     是     |  是  |
      | 可重复读（repeatable-read） |  否  |     否     |  是  |
      |   串行化（serializable）    |  否  |     否     |  否  |

      1. 脏读

         脏读(Dirty Read):当一个事务正在访问数据并对数据做了修改,而这种修改还没有提交到数据库,这时另外一个事务也访问了这个数据,然后使用了这个数据,因为这个数据是还没有提交的操作,那么另外一个事务读到的这个数据就是"脏数据",依据脏数据所做的操作可能是不正确的
         如:事务A读取了事务B更新但未提交的数据，然后B回滚操作，那么A读取到的数据是脏数据

      2. 不可重复读：

         指在一个事务内多次读取同一数据,在这个事务还没有结束时,另外一个事务也访问该数据,那么在第一个事务中的两次读取数据之间,由于第二个事务的修改导致第一个事务两次读取的数据不一致,这就导致了一个事务内两次读取的数据不一致,因此称为不可重复读
         如:事务 A 多次读取同一数据，事务 B 在事务A多次读取的过程中，对数据作了更新并提交，导致事务A多次读取同一数据时，结果 不一致。

      3. 幻读：

         幻读(Phantom Read):幻读与不可重复读类似,他发生在一个事务T1读取了几行数据,接着另外一个并发事务T2插入了一些数据,在随后的查询中,第一个事务就会发现读了一些原本不存在的记录,就好像发生了幻觉一样,所以称为幻读 

         如:系统管理员A将数据库中所有学生的成绩从具体分数改为ABCDE等级，但是系统管理员B就在这个时候插入了一条具体分数的记录，当系统管理员A改结束后发现还有一条记录没有改过来，就好像发生了幻觉一样，这就叫幻读。

### 九、DCL数据控制语言

主要用于管理数据库用户以及控制数据的访问控制权限

只是由DBA来进行的操作

1. 用户管理

   1. 查询用户

      > use mysql;
      >
      > select * from user\G;

   2. 新建用户

      > create user '用户名'@'主机名' identified by '密码';
      >
      > 注意：主机名为localhost/%，localhost为本地访问，%为多用户远程访问，单用户远程访问为指定ip地址

   3. 修改密码

      > alter user '用户名'@'主机名' identified with mysql_native_password by '新密码'；

   4. 删除指定用户

      > drop user '用户名'@'主机名'；

2. 权限管理

   mysql中定义了很多权限，但是常用的只有一下几种

   1. ALL/All Privileges	 所有权
   2. select                 查询权限
   3. insert                 添加权限
   4. update                 修改权限
   5. delete                 删除权限
   6. drop                   删除库/表/表结构/视图权限
   7. create                 创建库/表权限

   > 查询授予用户的权限
   >
   > show grants for '用户名'@'主机名'

3. 授予权限

   > grant 权限1，权限2... on 数据库名.表名 to '用户名'@'主机名'；

4. 撤销权限

   > revoke 权限1，权限2... on数据库名.表名 from '用户名'@'主机名'；

### 十、表于表之间的关系

1. 一对多，多对一(one-to-many  many-to-one)

   表设计：在多方表中添加一个外键列，去关联一方表的主键列

   案例：一个部门多个员工

2. 一对一(one-to-one)

   案例：一个公司发行一种股票

   1. 单向主键关联
   2. 双向主键关联
   3. 单向外键关联
   4. 双向外键关联

3. 多对多(many-to-many)

   表设计：创建一张中间表，用于存储两张多方表的主键

   案例：一个学生对应多个老师，一个老师对应多个学生吧

### 十一、ER图

Entity-relationship  实体关系图

主要用于描述数据库中表与表之间得关系

1. 实体Entity

   数据模型中实体对象(表),使用长方形表示

2. 属性Attribute

   实体对象得属性(字段)使用椭圆形表示

3. 关系Relationship

   实体对象之间得关系(表与表之间得关系)，使用菱形表示

### 十二、数据表设计得三大范式

为了建立结构合理，数据冗余较小得表，所以数据表在设计时要遵循相应得原则，也就是范式

1. 保证数据表中每一列得原子性，每一列下面得数据不能再拆分
2. 非主键字段不能部分依赖主键字段确保表中的每一列要和主键列直接关联
3. 确保表中的每一列和主键列都素hi直接关联关系，而不是间接关联，不能存在传递依赖
